# iRime定制教程

> 本篇教程旨在讲解如何利用YAML配置文件控制iRime的选项，方案定制教程请参考[这里](./方案定制教程.md)

Rime在更新的时候有可能会覆盖用户修改过的配置文件，所以Rime的开发者想到了一个避免出现这种因为升级应用而丢失配置的尴尬情况而提供了一个解决方案。那就是：

在Rime部署时，若用户配置文件路径下存在着后缀为`custom.yaml`的*补丁文件*，补丁文件的内容将会被载入Rime引擎，参数以均补丁文件为准。

本篇教程就以iRime的主程序配置文件作为示例，简单介绍以下如何定制自己的*补丁文件*。

1. 将iOS设备连入与电脑相同的网络中，并打开iRime主程序，点击`电脑快传`菜单项

2. 在电脑任意一款浏览器的地址栏中登入手机屏幕中显示的地址

3. 将本教程中即将定制的*iRime.yaml*文件下载到电脑上

4. 将本文件复制一份，并命名为`iRime.custom.yaml`

5. 然后用一款好用的文本编辑器打开`iRime.custom.yaml`

> 不推荐使用Windows系统自带的记事本，因为记事本功能薄弱，而且Win10以前版本的记事本不支持Unix的换行符，有可能将所有内容都挤到一行显示，造成阅读和编辑困难。

> 推荐使用[`Notepad++`](https://notepad-plus-plus.org/)或[`Sublime Text`](https://www.sublimetext.com/)一类较为专业的文本编辑器。

> 下面一些内容基于你已经使用了以上推荐的任意一款或同类的编辑器。

6. 首先我们来观察以下*iRime.yaml*原有的内容，可以看到有一些内容以`#`井号开头的内容。此类内容被成为**注释**，不会被Rime引擎读取。

示例：
```
# 我是一行注释，Rime引擎不会读取我的内容

# #号在开头，即使后面是正确的配置也不会读取，例如 config_version: 1.4

config_version: 1.4 #配置文件版本

config_version: # 1.4 配置文件版本
```
在上面示例的第一行中，开头第一个字符就是`#`，所以`#`后的所有内容都不会被Rime读取，Rime引擎将会直接忽略这一行的所有内容。

接下来我们来看示例的第二行，第二行中看起来既包含了一些注释也包含了一段参数。

**注意**：事实上并非如此！因为本行第一个字符仍然是`#`，所以Rime引擎将忽略这一行的所有内容。

如果你足够的细心，你应该可以看到你的编辑器中所有`#`以及其后的内容都是同一种颜色的，这从侧面可以反应出`#`开头的所有内容将被Rime引擎所忽略！

细心的你也许已经发现，有一些包含参数和注释的行，参数与注释的颜色有显著的差别。现在我们来仔细观察以下示例的第三行。

这行参数既包含了一些参数选项，也包含了一定的注释：

+ 首先，这一行中包含了`config_version`    -- 这是参数的名称。

+ 其次，参数名称后面紧跟了`:`一个**英文半角冒号**    -- 这告诉Rime引擎，从这里开始后面的内容就是参数的`值`。

+ 再次，`:`后面是字符串`1.4`    -- 这就是`config_version`这个参数的`值`。

+ 最后，我们再次见到了值得十分重视的`#`！    -- 这是注释，Rime引擎会忽略从`#`开始直到本行最后的所有内容！！

综上所述，这一行实际上被Rime读入的内容只有`config_version: 1.4 `。

而示例最后一行则是一个错误的反例，通过观察，我们可以直到，这一行试图在向Rime引擎宣告一个叫`config_version`，但宣告的内容Rime引擎却永远都**不会**知道。

因为某人粗心大意地将版本号`1.4`放到了`#`之后！！`#`后的所有内容都会被忽略，所以即使`1.4`对于这位用户来说是具有意义的，但Rime却忠实地将它`视而不见`了。这将会可能导致部署失败，程序崩溃的可悲后果。

所以，请大家务必要十分注意在何时需要用`#`宣告注释，在同时包含参数与注释的行中一定要注意是否有错误。

> `#`注释的妙用
> 当我们在调教配置文件的时候，会尝试各种各样的参数组合起来的效果，随着调教的进行，我们可能会在配置文件中加入大量的参数，有时因为不确定参数的实际效果，我们总会希望可以快速打开或关闭某个参数，来观察它们造成的影响。在这种时候，我们并不需要删除或重新添加一个参数以达成目的。通常我们会将`#`加到参数所在的行头，以达成快速关闭参数而又不用删除它的目的。等到确定不需要本参数的时候再进行删除操作，以避免反复输入同样的参数而浪费时间。
